var pokemonRepository = (function () {
  var t = [],
    e = "https://pokeapi.co/api/v2/pokemon/?limit=150";
  function n(e) {
    t.push(e);
  }
  function i(t) {
    var e = t.detailsUrl;
    return $.ajax(e)
      .then(function (e) {
        (t.imageUrl = e.sprites.front_default),
          (t.height = e.height),
          (t.weight = e.weight),
          (t.types = []);
        for (var n = 0; n < e.types.length; n++)
          t.types.push(e.types[n].type.name);
        t.abilities = [];
        for (var i = 0; i < e.abilities.length; i++)
          t.abilities.push(e.abilities[i].ability.name);
        return t;
      })
      .catch(function (t) {
        console.error(t);
      });
  }
  function o(t) {
    i(t).then(function () {
      a(t);
    });
  }
  function a(t) {
    var e = $(".modal-body"),
      n = $(".modal-title");
    e.empty(), n.empty();
    var i = $("<h1>" + t.name + "</h1>"),
      o = $("<img>").attr("src", t.imageUrl),
      a = $("<p>height: " + t.height + "</h1>"),
      p = $("<p>weight: " + t.weight + " lbs</p>"),
      l = $("<p>types: " + t.types.join(", ") + "</p>"),
      s = $("<p>abilities: " + t.abilities.join(", ") + "&nbsp;</p>");
    n.append(i),
      e.append(o),
      e.append(a),
      e.append(p),
      e.append(l),
      e.append(s);
  }
  return {
    add: n,
    getAll: function () {
      return t;
    },
    addListItem: function (t) {
      var e = $(".pokemon-list"),
        n = $(
          "<button type= 'button' class='btn btn-danger col-12 button-class' data-toggle='modal' data-target='#exampleModal'>" +
            t.name +
            "</button><div class='col-1'></div>"
        ),
        i = $("<li></li>");
      i.append(n),
        e.append(i),
        $(n).on("click", function () {
          console.log(t), o(t);
        });
    },
    loadList: function () {
      return $.ajax(e)
        .then(function (t) {
          t.results.forEach(function (t) {
            n({ name: t.name, detailsUrl: t.url });
          });
        })
        .catch(function (t) {
          console.error(t);
        });
    },
    loadDetails: i,
    showDetails: o,
    showModal: a,
  };
})();
pokemonRepository.loadList().then(function () {
  pokemonRepository.getAll().forEach(function (t) {
    pokemonRepository.addListItem(t);
  });
});
